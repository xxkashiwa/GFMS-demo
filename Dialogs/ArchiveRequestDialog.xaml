<?xml version="1.0" encoding="utf-8"?>
<ContentDialog
    x:Class="GFMS.Dialogs.ArchiveRequestDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="调档申请"
    PrimaryButtonText="提交申请"
    CloseButtonText="取消"
    DefaultButton="Primary"
    Width="600">

    <ScrollViewer>
        <StackPanel Spacing="15" Margin="20">
            
            <!-- 学生基本信息 -->
            <StackPanel Spacing="8">
                <TextBlock Text="学生基本信息" 
                          FontSize="16" 
                          FontWeight="SemiBold" 
                          Foreground="{ThemeResource SystemAccentColor}"/>
                
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="10"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <TextBox Grid.Row="0" Grid.Column="0" 
                            x:Name="StudentIdTextBox"
                            Header="学号" 
                            IsReadOnly="True"/>
                    <TextBox Grid.Row="0" Grid.Column="2" 
                            x:Name="StudentNameTextBox"
                            Header="姓名" 
                            IsReadOnly="True"/>
                    <TextBox Grid.Row="1" Grid.Column="0" 
                            x:Name="MajorTextBox"
                            Header="专业" 
                            IsReadOnly="True"/>
                    <TextBox Grid.Row="1" Grid.Column="2" 
                            x:Name="GraduationYearTextBox"
                            Header="毕业年份" 
                            IsReadOnly="True"/>
                </Grid>
            </StackPanel>

            <!-- 接收单位信息 -->
            <StackPanel Spacing="8">
                <TextBlock Text="接收单位信息" 
                          FontSize="16" 
                          FontWeight="SemiBold" 
                          Foreground="{ThemeResource SystemAccentColor}"/>
                
                <TextBox x:Name="ReceiverNameTextBox"
                        Header="单位名称*" 
                        PlaceholderText="请输入接收单位全称"/>
                
                <TextBox x:Name="ReceiverAddressTextBox"
                        Header="单位地址*" 
                        PlaceholderText="请输入详细地址"
                        AcceptsReturn="True"
                        Height="60"/>
                
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="10"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <TextBox Grid.Column="0" 
                            x:Name="ReceiverContactTextBox"
                            Header="联系人" 
                            PlaceholderText="请输入联系人姓名"/>
                    <TextBox Grid.Column="2" 
                            x:Name="ReceiverPhoneTextBox"
                            Header="联系电话" 
                            PlaceholderText="请输入联系电话"/>
                </Grid>
                
                <TextBox x:Name="PostalCodeTextBox"
                        Header="邮政编码" 
                        PlaceholderText="请输入邮政编码"
                        MaxLength="6"/>
            </StackPanel>

            <!-- 申请信息 -->
            <StackPanel Spacing="8">
                <TextBlock Text="申请信息" 
                          FontSize="16" 
                          FontWeight="SemiBold" 
                          Foreground="{ThemeResource SystemAccentColor}"/>
                
                <TextBox x:Name="ReasonTextBox"
                        Header="申请原因" 
                        PlaceholderText="请说明申请原因"
                        AcceptsReturn="True"
                        Height="80"/>
                
                <TextBlock Text="注：上述信息仅用于界面展示和转递函生成，实际数据库中只存储接收单位名称和地址" 
                          FontSize="10"
                          Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                          Margin="0,5,0,0"/>
            </StackPanel>

            <!-- 附件上传 -->
            <StackPanel Spacing="8">
                <TextBlock Text="附件上传" 
                          FontSize="16" 
                          FontWeight="SemiBold" 
                          Foreground="{ThemeResource SystemAccentColor}"/>
                
                <Border Background="{ThemeResource CardBackgroundFillColorSecondaryBrush}"
                       CornerRadius="8"
                       Padding="15">
                    <StackPanel Spacing="10">
                        <TextBlock Text="可上传以下材料的扫描件或照片：" 
                                  FontSize="12"
                                  Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <TextBlock Text="• 身份证复印件" FontSize="12"/>
                        <TextBlock Text="• 毕业证书复印件（如有）" FontSize="12"/>
                        <TextBlock Text="• 其他相关证明材料" FontSize="12"/>
                        
                        <Button Content="选择文件" 
                               x:Name="SelectFilesButton"
                               Click="SelectFilesButton_Click"
                               Margin="0,10,0,0"/>
                        
                        <ListView x:Name="AttachmentsList" 
                                 MaxHeight="100"
                                 Visibility="Collapsed">
                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" 
                                                  Text="{Binding}" 
                                                  VerticalAlignment="Center"
                                                  FontSize="12"/>
                                        <Button Grid.Column="1" 
                                               Content="移除" 
                                               FontSize="10"
                                               Padding="8,4"/>
                                    </Grid>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- 重要提示 -->
            <Border Background="{ThemeResource SystemFillColorAttentionBackgroundBrush}"
                   CornerRadius="8"
                   Padding="15">
                <StackPanel Spacing="5">
                    <TextBlock Text="⚠ 重要提示" 
                              FontWeight="SemiBold"
                              Foreground="{ThemeResource SystemFillColorAttentionBrush}"/>
                    <TextBlock Text="1. 请确保填写信息准确，提交后将进入审核流程"
                              FontSize="12"
                              Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    <TextBlock Text="2. 审核通过后，档案将按填写地址寄出"
                              FontSize="12"
                              Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    <TextBlock Text="3. 如需修改信息，请联系档案管理员"
                              FontSize="12"
                              Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</ContentDialog>